<!DOCTYPE html>
<!--
Template Name: Metronic - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.3.6
Version: 4.5.3
Author: KeenThemes
Website: http://www.keenthemes.com/
Contact: support@keenthemes.com
Follow: www.twitter.com/keenthemes
Like: www.facebook.com/keenthemes
Purchase: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469?ref=keenthemes
License: You must have a valid license purchased only from themeforest(the above link) in order to legally use the theme for your project.
-->
<!--[if IE 8]>
<html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]>
<html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->
<!-- BEGIN HEAD -->
{% load staticfiles %}
<head>
    <meta charset="utf-8"/>
    <title>City Hoopla | Edit Category</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <meta content="" name="description"/>
    <meta content="" name="author"/>
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'assets/global/plugins/font-awesome/css/font-awesome.min.css' %}" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'assets/global/plugins/simple-line-icons/simple-line-icons.min.css' %}" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'assets/global/plugins/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'assets/global/plugins/uniform/css/uniform.default.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css' %}" rel="stylesheet"
          type="text/css"/>
    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <link href="{% static 'assets/global/plugins/bootstrap-select/css/bootstrap-select.min.css' %}" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'assets/global/plugins/jquery-multi-select/css/multi-select.css' %}" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'assets/global/plugins/select2/css/select2.min.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'assets/global/plugins/select2/css/select2-bootstrap.min.css' %}" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'assets/global/plugins/select2/css/select2.min.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'assets/global/plugins/select2/css/select2-bootstrap.min.css' %}" rel="stylesheet"
          type="text/css"/>
    <!-- END PAGE LEVEL PLUGINS -->
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <link href="{% static 'assets/global/plugins/datatables/datatables.min.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css' %}"
          rel="stylesheet" type="text/css"/>
    <!-- END PAGE LEVEL PLUGINS -->
    <!-- BEGIN THEME GLOBAL STYLES -->
    <link href="{% static 'assets/global/css/components.min.css' %}" rel="stylesheet" id="style_components"
          type="text/css"/>
    <link href="{% static 'assets/global/css/plugins.min.css' %}" rel="stylesheet" type="text/css"/>
    <!-- END THEME GLOBAL STYLES -->
    <!-- BEGIN THEME LAYOUT STYLES -->
    <link href="{% static 'assets/layouts/layout2/css/layout.min.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'assets/layouts/layout2/css/themes/blue.min.css' %}" rel="stylesheet" type="text/css"
          id="style_color"/>
    <link href="{% static 'assets/layouts/layout2/css/custom.min.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'vendor/bootstrap-fileinput/jasny-bootstrap.min.css' %}" rel="stylesheet" media="screen">
    <!-- END THEME LAYOUT STYLES -->

    <link href="{% static 'spectrum/spectrum.css' %}" rel="stylesheet" media="screen">
    <!-- END HEAD -->
    <style type="text/css">
            div.dataTables_wrapper div.dataTables_info {
        padding-top: 8px;
        white-space: nowrap;
        display: none;
    }
    div.dataTables_wrapper div.dataTables_length label {
        font-weight: normal;
        text-align: left;
        white-space: nowrap;
        display: none;
    }

    div.dataTables_filter label {
        font-weight: normal;
        white-space: nowrap;
        text-align: left;
        display: none;
    }
    .addcategory_input{
    width: 88%;
    display: inline;
    margin-bottom: 10px;
}
        #processing{
    height: 100vh;
    position: fixed;
    width: 100%;
    margin: 0px auto;
    z-index: 9999;
    background-color: #FFF;
    background-image: none;
    background-attachment: scroll;
    background-position: 0% 0%;
    background-clip: border-box;
    background-origin: padding-box;
    background-repeat: repeat;
    background-size: inherit;
    opacity: 0.5;
}

#loading{
    width: 36%;
    height: 22px;
    position: absolute;
    top: 26%;
    left: 32%;
    margin: -28px 0px 0px -25px;
    text-align: center;
    font-size: 13px;
    font-weight: 500;
    color: #000;
}

.page-header.navbar .page-logo .logo-default {
    margin: 2px 0 0;
    width: 105px;
    background: rgba(255, 255, 255, 0.48);
}

.page-header.navbar .page-logo {
  /* fallback */
  background-color: #0d67e6;
  background-image: url(images/linear_bg_1.png);
  background-repeat: repeat-y;

  /* Safari 4-5, Chrome 1-9 */
  background: -webkit-gradient(linear, left top, right top, from(#0d67e6), to(#11ca9a));

  /* Safari 5.1, Chrome 10+ */
  background: -webkit-linear-gradient(left, #0d67e6, #11ca9a);

  /* Firefox 3.6+ */
  background: -moz-linear-gradient(left, #0d67e6, #11ca9a);

  /* IE 10 */
  background: -ms-linear-gradient(left, #0d67e6, #11ca9a);

  /* Opera 11.10+ */
  background: -o-linear-gradient(left, #0d67e6, #11ca9a);
}

@media (max-width: 767px){
.page-header.navbar {
     background-color: #0d67e6;
  background-image: url(images/linear_bg_1.png);
  background-repeat: repeat-y;

  /* Safari 4-5, Chrome 1-9 */
  background: -webkit-gradient(linear, left top, right top, from(#0d67e6), to(#11ca9a));

  /* Safari 5.1, Chrome 10+ */
  background: -webkit-linear-gradient(left, #0d67e6, #11ca9a);

  /* Firefox 3.6+ */
  background: -moz-linear-gradient(left, #0d67e6, #11ca9a);

  /* IE 10 */
  background: -ms-linear-gradient(left, #0d67e6, #11ca9a);

  /* Opera 11.10+ */
  background: -o-linear-gradient(left, #0d67e6, #11ca9a);
}
}

.select2{
width: 100% !important;
}

.user-image img {
    max-width: 100%;
}
.fileinput .thumbnail>img {
    height: 178px !important;
}
.fileinput-preview.thumbnail {
    max-width: 278px;
}

.btn-azure:hover {
    background-color: #0095C8;
    border-color: #0095C8;
    color: #ffffff;
}

.btn-file {
    overflow: hidden;
    position: relative;
    vertical-align: middle;
}

.user-image .user-image-buttons {
    position: absolute;
    top: 20%;
    left: 20%;
}

.btn-file input[type=file] {
    position: absolute;
    top: 0;
    right: 0;
    min-width: 100%;
    min-height: 100%;
    font-size: 100px;
    text-align: right;
    filter: alpha(opacity=0);
    opacity: 0;
    outline: none;
    background: white;
    cursor: inherit;
    display: block;
}

.btn-red:hover {
    background-color: #da4f4a !important;
    border-color: #da4f4a;
    color: #ffffff;
}

.btn-sm, .btn-group-sm>.btn {
    padding: 5px 10px;
    font-size: 12px;
    line-height: 1.5;
    border-radius: 3px;
}

.btn {
    transition: all 0.3s ease 0s !important;
    background-image: none !important;
    box-shadow: none !important;
    outline: none !important;
    position: relative;
}

.fileinput .btn {
    vertical-align: middle;
}

.btn-red{
    display:none;
}
    </style>

<body class="page-header-fixed page-sidebar-closed-hide-logo page-container-bg-solid">
<div id="processing" style="display:none;">
    <div id="loading">
        <img src="{% static 'assets/loading-bars.gif' %}" style="height : 100px;">
    </div>
</div>
<!-- BEGIN HEADER -->
<div class="page-header navbar navbar-fixed-top">
    <!-- BEGIN HEADER INNER -->
    <div class="page-header-inner ">
        <!-- BEGIN LOGO -->
        <div class="page-logo">
            <a href="/dashboard/">
                <img src="{% static 'assets/layouts/layout2/img/City_Hoopla_Logo.png' %}" alt="logo"
                     class="logo-default"/> </a>
            <div class="menu-toggler sidebar-toggler">
                <!-- DOC: Remove the above "hide" to enable the sidebar toggler button on header -->
            </div>
        </div>
        <!-- END LOGO -->
        <!-- BEGIN RESPONSIVE MENU TOGGLER -->
        <a href="javascript:;" class="menu-toggler responsive-toggler" data-toggle="collapse"
           data-target=".navbar-collapse"> </a>
        <!-- END RESPONSIVE MENU TOGGLER -->
        <!-- BEGIN PAGE TOP -->
        <div class="page-top">
            <!-- BEGIN TOP NAVIGATION MENU -->
            <div class="top-menu">
                <ul class="nav navbar-nav pull-right">
                    <!-- BEGIN NOTIFICATION DROPDOWN -->
                    <!-- DOC: Apply "dropdown-dark" class after below "dropdown-extended" to change the dropdown styte -->
                    <!-- <li class="dropdown dropdown-extended dropdown-notification" id="header_notification_bar">
                        <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
                            <i class="icon-bell"></i>
                            <span class="badge badge-default"> 7 </span>
                        </a>
                        <ul class="dropdown-menu">
                            <li class="external">
                                <h3>
                                    <span class="bold">12 pending</span> notifications</h3>
                                <a href="page_user_profile_1.html">view all</a>
                            </li>
                            <li>
                                <ul class="dropdown-menu-list scroller" style="height: 250px;" data-handle-color="#637283">
                                    <li>
                                        <a href="javascript:;">
                                            <span class="time">just now</span>
                                            <span class="details">
                                                <span class="label label-sm label-icon label-success">
                                                    <i class="fa fa-plus"></i>
                                                </span> New user registered. </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="javascript:;">
                                            <span class="time">3 mins</span>
                                            <span class="details">
                                                <span class="label label-sm label-icon label-danger">
                                                    <i class="fa fa-bolt"></i>
                                                </span> Server #12 overloaded. </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="javascript:;">
                                            <span class="time">10 mins</span>
                                            <span class="details">
                                                <span class="label label-sm label-icon label-warning">
                                                    <i class="fa fa-bell-o"></i>
                                                </span> Server #2 not responding. </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="javascript:;">
                                            <span class="time">14 hrs</span>
                                            <span class="details">
                                                <span class="label label-sm label-icon label-info">
                                                    <i class="fa fa-bullhorn"></i>
                                                </span> Application error. </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="javascript:;">
                                            <span class="time">2 days</span>
                                            <span class="details">
                                                <span class="label label-sm label-icon label-danger">
                                                    <i class="fa fa-bolt"></i>
                                                </span> Database overloaded 68%. </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="javascript:;">
                                            <span class="time">3 days</span>
                                            <span class="details">
                                                <span class="label label-sm label-icon label-danger">
                                                    <i class="fa fa-bolt"></i>
                                                </span> A user IP blocked. </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="javascript:;">
                                            <span class="time">4 days</span>
                                            <span class="details">
                                                <span class="label label-sm label-icon label-warning">
                                                    <i class="fa fa-bell-o"></i>
                                                </span> Storage Server #4 not responding dfdfdfd. </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="javascript:;">
                                            <span class="time">5 days</span>
                                            <span class="details">
                                                <span class="label label-sm label-icon label-info">
                                                    <i class="fa fa-bullhorn"></i>
                                                </span> System Error. </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="javascript:;">
                                            <span class="time">9 days</span>
                                            <span class="details">
                                                <span class="label label-sm label-icon label-danger">
                                                    <i class="fa fa-bolt"></i>
                                                </span> Storage server failed. </span>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li> -->
                    <!-- END NOTIFICATION DROPDOWN -->
                    <!-- BEGIN USER LOGIN DROPDOWN -->
                    <!-- DOC: Apply "dropdown-dark" class after below "dropdown-extended" to change the dropdown styte -->
                    <li class="dropdown dropdown-user">
                        <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown"
                           data-close-others="true">
                            <!--                                         <img alt="" class="img-circle" src="{% static 'assets/layouts/layout2/img/avatar3_small.jpg' %}" /> -->
                            <span class="username username-hide-on-mobile"> {{ username }} </span>
                            <i class="fa fa-angle-down"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-default">
                            <!-- <li>
                                <a href="page_user_profile_1.html">
                                    <i class="icon-user"></i> My Profile </a>
                            </li> -->
                            <li>
                                <a href="/log-out/">
                                    <i class="icon-key"></i> Log Out </a>
                            </li>
                        </ul>
                    </li>
                    <!-- END USER LOGIN DROPDOWN -->
                </ul>
            </div>
            <!-- END TOP NAVIGATION MENU -->
        </div>
        <!-- END PAGE TOP -->
    </div>
    <!-- END HEADER INNER -->
</div>
<!-- END HEADER -->
<!-- BEGIN HEADER & CONTENT DIVIDER -->
<div class="clearfix"></div>
<!-- END HEADER & CONTENT DIVIDER -->
<!-- BEGIN CONTAINER -->
<div class="page-container">
    <!-- BEGIN SIDEBAR -->
    <div class="page-sidebar-wrapper">
        <!-- END SIDEBAR -->
        <!-- DOC: Set data-auto-scroll="false" to disable the sidebar from auto scrolling/focusing -->
        <!-- DOC: Change data-auto-speed="200" to adjust the sub menu slide up/down speed -->
        <div class="page-sidebar navbar-collapse collapse">
            <!-- BEGIN SIDEBAR MENU -->
            <!-- DOC: Apply "page-sidebar-menu-light" class right after "page-sidebar-menu" to enable light sidebar menu style(without borders) -->
            <!-- DOC: Apply "page-sidebar-menu-hover-submenu" class right after "page-sidebar-menu" to enable hoverable(hover vs accordion) sub menu mode -->
            <!-- DOC: Apply "page-sidebar-menu-closed" class right after "page-sidebar-menu" to collapse("page-sidebar-closed" class must be applied to the body element) the sidebar sub menu mode -->
            <!-- DOC: Set data-auto-scroll="false" to disable the sidebar from auto scrolling/focusing -->
            <!-- DOC: Set data-keep-expand="true" to keep the submenues expanded -->
            <!-- DOC: Set data-auto-speed="200" to adjust the sub menu slide up/down speed -->
            <ul class="page-sidebar-menu  page-header-fixed page-sidebar-menu-hover-submenu " data-keep-expanded="false"
                data-auto-scroll="true" data-slide-speed="200">
                <li class="nav-item start  open">
                    <a href="/dashboard/" class="nav-link nav-toggle">
                        <i class="icon-home"></i>
                        <span class="title">Dashboard</span>
                        <span class="selected"></span>
                        <span class="arrow open"></span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="javascript:;" class="nav-link nav-toggle">
                        <i class="icon-users"></i>
                        <span class="title">Customers </span>
                        <span class="arrow"></span>
                    </a>
                    <ul class="sub-menu">
                        <li class="nav-item start ">
                            <a href="/subscriber/" class="nav-link ">
                                <i class="icon-user"></i>
                                <span class="title">Subscribers</span>
                            </a>
                        </li>
                        <li class="nav-item start ">
                            <a href="/consumer/" class="nav-link ">
                                <i class="icon-user"></i>
                                <span class="title">Consumers</span>
                                <span class="badge badge-success"></span>
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="nav-item  ">
                    <a href="/user/" class="nav-link nav-toggle">
                        <i class="icon-user"></i>
                        <span class="title">Admin </span>
                        <span class="arrow"></span>
                    </a>
                </li>
                <li class="nav-item  ">
                    <a href="/rate-card/" class="nav-link nav-toggle">
                        <i class="icon-settings"></i>
                        <span class="title">Rate Card </span>
                        <span class="arrow"></span>
                    </a>
                </li>
                     <li class="nav-item  ">
                            <a href="javascript:;" class="nav-link nav-toggle">
                                <i class="icon-settings"></i>
                                <span class="title">Notifications</span>
                                <span class="arrow"></span>
                            </a>
                            <ul class="sub-menu">
                                <li class="nav-item start ">
                                    <a href="/send_sms/" class="nav-link ">
												<i class="fa fa-envelope-o" aria-hidden="true"></i>
                                           <span class="title">SMS</span>
                                    </a>
                                </li>
                                <li class="nav-item start ">
                                    <a href="/send_email/" class="nav-link ">
												<i class="fa fa-envelope-o" aria-hidden="true"></i>
                                        <span class="title">Email</span>
                                        <span class="badge badge-success"></span>
                                    </a>
                                </li>
                                <li class="nav-item start ">
                                    <a href="/sms/" class="nav-link ">
												<i class="fa fa-envelope-o" aria-hidden="true"></i>
                                        <span class="title">Push</span>
                                        <span class="badge badge-success"></span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                         <li class="nav-item ">
                            <a  class="nav-link nav-toggle">
                                <i class="icon-bulb"></i>
                                <span class="title">Reference Data </span>
                                <span class="arrow"></span>
                            </a>
                            <ul class="sub-menu">
                                <li class="nav-item start ">
                                    <a href="/reference-data/" class="nav-link ">
                                        <i class="icon-bar-chart"></i>
                                        <span class="title"> City </span>
                                    </a>
                                </li>
                                <li class="nav-item start ">
                                    <a href="/category/" class="nav-link ">
                                        <i class="icon-bulb"></i>
                                        <span class="title"> Category </span>
                                        <span class="badge badge-success"></span>
                                    </a>
                                </li>
                                <li class="nav-item start ">
                                    <a href="/user-role/" class="nav-link ">
                                       <i class="icon-user"></i>
                                        <span class="title"> User Role </span>
                                        <span class="badge badge-success"></span>
                                    </a>
                                </li>
                            </ul>
                        </li>
            </ul>
            <!-- END SIDEBAR MENU -->
        </div>
        <!-- END SIDEBAR -->
    </div>
    <!-- END SIDEBAR -->
    <!-- BEGIN CONTENT -->
    <div class="page-content-wrapper">
        <!-- BEGIN CONTENT BODY -->
        <div class="page-content">
            <h3 class="page-title"> Reference Data
            </h3>
            <!-- BEGIN PAGE HEADER-->
            <div class="page-bar">
                <ul class="page-breadcrumb">

                    <li>
                        <span>Reference Data</span>
                        <i class="fa fa-angle-right"></i>
                    </li>
                    <li>
                        <a href="/category/">Category</a>
                        <i class="fa fa-angle-right"></i>
                    </li>
                    <li>
                        <span>Edit</span>
                    </li>
                </ul>
            </div>

            <!-- END PAGE HEADER-->
            <div class="row">
                <div class="col-lg-12">
                    <div class="portlet light  ">


                        <div class="portlet-body form">
                            <!-- BEGIN FORM-->
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="portlet-body">

                                        <div class="form-wizard">
                                            <div class="form-body">
                                                <!-- Start of tabs -->

                                                <div class="tab-content">
                                                    <div id="tab1" class="tab-pane fade active in">

                                                        <form id="cityform" role="form" enctype="multipart/form-data"
                                                              name="city-form" ,method="POST">
                                                            {% csrf_token %}
                                                            <input type="hidden" id="category_id" name="category_id"
                                                                   value="{{category_id}}" type="text">
                                                            {% if not city_sequence_list %}
                                                            <div id="city-sequence">
                                                                <div class="row">
                                                                    <div class="col-lg-5">
                                                                        <div class="form-group">
                                                                            <label class="control-label ">City
                                                                            </label>
                                                                            <select name="city"
                                                                                    class="city city_category form-control">
                                                                                <option value="">Select City</option>
                                                                                {% for city in city_list %}
                                                                                <option value="{{city.city_place_id}}">
                                                                                    {{city.city_id.city_name}}
                                                                                </option>
                                                                                {% endfor %}
                                                                            </select>
                                                                            <label class="error"
                                                                                   style="color:red; display:none;"></label>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-lg-4">
                                                                        <div class="form-group">
                                                                            <label class="control-label ">Sequence
                                                                            </label>
                                                                            <input type="text" name="sequence"
                                                                               value="" onkeypress="return validateIntKeyPress(this,event);"
                                                                               class="sequence_category form-control "/>
                                                                            <label class="error"
                                                                                   style="color:red; display:none;"></label>
                                                                        </div>
                                                                    </div>

                                                                    <div class="col-lg-1"
                                                                         style="margin-top: 30px; text-align:center;">
                                                                        <a class="fa fa-plus-circle fa-lg add-city"></a>
                                                                    </div>
                                                                    <div class="col-lg-2" style="margin-top: 25px;">
                                                                        <input id="view_sequence" value="Current Sequence"
                                                                               type="button" class="btn green">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            {% else %}
                                                            <div id="city-sequence">
                                                                {% for cat_city,cat_sequence in city_sequence_list %}
                                                                <div class="row">
                                                                    <div class="col-lg-5">
                                                                        <div class="form-group">
                                                                            <label class="control-label ">City
                                                                            </label>
                                                                            <select name="city"
                                                                                    class="city city_category form-control">
                                                                                <option value="">Select City</option>
                                                                                {% for city in city_list %}
                                                                                {% if cat_city == city.city_id.city_name %}
                                                                                <option selected
                                                                                        value="{{city.city_place_id}}">
                                                                                    {{city.city_id.city_name}}
                                                                                </option>
                                                                                {% else %}
                                                                                <option value="{{city.city_place_id}}">
                                                                                    {{city.city_id.city_name}}
                                                                                </option>
                                                                                {% endif %}
                                                                                {% endfor %}
                                                                            </select>
                                                                            <label class="error"
                                                                                   style="color:red; display:none;"></label>
                                                                            <!-- <label class="error" id="state_error" style="color:red; display:none;"></label> -->
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-lg-4">
                                                                        <div class="form-group">
                                                                            <label class="control-label ">Sequence
                                                                            </label>
                                                                            <input type="text" name="sequence"
                                                                               id="sequence" onkeypress="return validateIntKeyPress(this,event);"
                                                                               value="{{cat_sequence}}"
                                                                               class="form-control sequence_category"/>
                                                                            <label class="error"
                                                                                   style="color:red; display:none;"></label>
                                                                        </div>
                                                                    </div>

                                                                    {% if forloop.counter == 1 %}
                                                                    <div class="col-lg-1"
                                                                         style="margin-top: 30px; text-align:center;">
                                                                        <a class="fa fa-plus-circle fa-lg add-city"></a>
                                                                    </div>
                                                                    <div class="col-lg-2" style="margin-top: 25px;">
                                                                        <input id="view_sequence" value="Current sequence"
                                                                               type="button" class="btn green">
                                                                    </div>
                                                                    {% endif %}
                                                                </div>
                                                                {% endfor %}
                                                            </div>
                                                            {% endif %}


                                                            <label class="error" id="city_error"
                                                                   style="color:red; display:none;"></label>
                                                            <hr>
                                                            <!--<div class="row">-->
                                                                <!--<div class="col-lg-6">-->
                                                                    <!--<div class="form-group">-->
                                                                        <!--<label class="control-label ">Category-->
                                                                            <!--<span class="required"> * </span>-->
                                                                        <!--</label>-->
                                                                        <!--<input type="text" name="city_name"-->
                                                                               <!--id="category_name"-->
                                                                               <!--value="{{category_name}}"-->
                                                                               <!--class="form-control"/>-->
                                                                        <!--<label class="error" id="cat_error"-->
                                                                               <!--style="color:red; display:none;"></label>-->
                                                                    <!--</div>-->
                                                                <!--</div>-->
                                                            <!--</div>-->
                                                            <div class="row" id="cat_div">

                                                                <div class="col-lg-8" style="z-index: 900;">
                                                                    <div class="form-group">
                                                                        <label class="control-label ">Category
                                                                            <span class="required"> * </span>
                                                                        </label>
                                                                    </div>
                                                                    {% if sub_category1_list %}
                                                                        <div class="col-lg-1" style="margin-top: 7px; margin-left:15px;
                                                                                    width: 15px; padding:0px;">
                                                                            <a name="sub_cat_level_1" id="collapse_btn_1"
                                                                               onclick='collapse_sub_cat(this.name,this.id,this)'
                                                                               class='fa fa-caret-down fa-lg'></a>
                                                                        </div>
                                                                    {% else %}
                                                                        <div class="col-lg-1" style="margin-top: 7px; margin-left:15px;
                                                                                    width: 15px; padding:0px;">
                                                                            <a name="sub_cat_level_1" id="collapse_btn_1"
                                                                               onclick='collapse_sub_cat(this.name,this.id,this)'
                                                                               class='fa fa-caret-right fa-lg'></a>
                                                                        </div>
                                                                    {% endif %}
                                                                    <div class="col-lg-9">
                                                                        <div class="form-group">
                                                                            <input type="text" name="cat_name"
                                                                                   id="cat_name" value="{{category_name}}"
                                                                                   class="form-control"/>
                                                                            <label class="error" id="cat_error"
                                                                                   style="color:red; display:none;"></label>
                                                                        </div>
                                                                    </div>

                                                                    <div class='col-lg-1'
                                                                         style='margin-top: 7px; margin-left:15px; padding:0px;'>
                                                                        <a name='sub_cat_level-collapse_btn_'
                                                                           onclick='add_sub_cat(this)'
                                                                           class='fa fa-plus-circle fa-lg'></a>&nbsp;
                                                                        <!--{% if sub_category1_list %}-->
                                                                            <!--<a name='level_0' style="color:red"-->
                                                                               <!--onclick='remove_sub_cats(this,{{category_id}},this.name,1)'-->
                                                                               <!--class='fa fa-times-circle fa-lg'></a>-->
                                                                        <!--{% else %}-->
                                                                            <!--<a name='level_0' style="color:red"-->
                                                                               <!--onclick='remove_sub_cats(this,{{category_id}},this.name,0)'-->
                                                                               <!--class='fa fa-times-circle fa-lg'></a>-->
                                                                        <!--{% endif %}-->
                                                                    </div>

                                                                    <div class="row" style='margin-left: 2.33333%;'
                                                                         id="sub_cat_level_1">
                                                                        {% if sub_category1_list %}
                                                                            {% for category1 in sub_category1_list %}
                                                                                <div class='col-lg-12'>
                                                                                    <div class='col-lg-1'
                                                                                         style='margin-top: 7px; margin-left:15px; width: 15px; padding:0px;'>
                                                                                        {% if category1.has_subcategory == 'Yes'%}
                                                                                            <a name='sub_cat_level{{forloop.counter}}'
                                                                                               id='collapse_btn_'
                                                                                               onclick='collapse_sub_cats(this.name,this.id,this)'
                                                                                               class='fa fa-caret-down fa-lg'></a>
                                                                                        {% else %}
                                                                                            <a name='sub_cat_level{{forloop.counter}}'
                                                                                               id='collapse_btn_'
                                                                                               onclick='collapse_sub_cats(this.name,this.id,this)'
                                                                                               class='fa fa-caret-right fa-lg'></a>
                                                                                        {% endif %}
                                                                                    </div>
                                                                                    <div class='col-lg-10'>
                                                                                        <div class='form-group'>
                                                                                            <input
                                                                                                type='text' name='level_1'
                                                                                                id='{{category1.category_id}}'
                                                                                                class='form-control'
                                                                                                placeholder='Level 1'
                                                                                                value="{{category1.category_name}}"
                                                                                            />
                                                                                            <label
                                                                                                for='{{category1.category_id}}' class='error'
                                                                                                style='color:red; display:none;'>
                                                                                            </label>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class='col-lg-1'
                                                                                         style='margin-top: 7px; margin-left:15px; padding:0px;'>
                                                                                        <a name='sub_cat_level-collapse_btn_'
                                                                                           onclick='add_sub_cats(this);'
                                                                                           class='fa fa-plus-circle fa-lg'></a>&nbsp;
                                                                                        {% if active_advert == 'No'%}
                                                                                            <a name='level_1' style="color:red;"
                                                                                               onclick='remove_sub_cats(this,{{category1.category_id}},this.name)'
                                                                                               class='fa fa-times-circle fa-lg'></a>
                                                                                        {% endif %}
                                                                                    </div>
                                                                                </div>
                                                                                <div class='row' style='margin-left: 4.33333%;'
                                                                                     id='sub_cat_level{{forloop.counter}}'>
                                                                                    {% if sub_category2_list %}
                                                                                        {% for category2 in sub_category2_list %}
                                                                                            {% if category2.parent_category_id == category1.category_id %}
                                                                                                <div class='col-lg-12'>
                                                                                                    <div class='col-lg-1'
                                                                                                         style='margin-top: 7px; margin-left:15px; width: 15px; padding:0px;'>
                                                                                                        {% if category2.has_subcategory == 'Yes'%}
                                                                                                            <a name='sub_cat_level{{forloop.counter}}'
                                                                                                               id='collapse_btn_'
                                                                                                               onclick='collapse_sub_cats(this.name,this.id,this)'
                                                                                                               class='fa fa-caret-down fa-lg'></a>
                                                                                                        {% else %}
                                                                                                            <a name='sub_cat_level{{forloop.counter}}'
                                                                                                               id='collapse_btn_'
                                                                                                               onclick='collapse_sub_cats(this.name,this.id,this)'
                                                                                                               class='fa fa-caret-right fa-lg'></a>
                                                                                                        {% endif %}
                                                                                                    </div>
                                                                                                    <div class='col-lg-10'>
                                                                                                        <div class='form-group'>
                                                                                                            <input
                                                                                                                type='text' name='level_2'
                                                                                                                id='{{category2.category_id}}'
                                                                                                                class='form-control'
                                                                                                                placeholder='Level 2'
                                                                                                                value="{{category2.category_name}}"
                                                                                                            />
                                                                                                            <label
                                                                                                                for='{{category2.category_id}}' class='error'
                                                                                                                style='color:red; display:none;'>
                                                                                                            </label>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class='col-lg-1'
                                                                                                         style='margin-top: 7px; margin-left:15px; padding:0px;'>
                                                                                                        <a name='sub_cat_level-collapse_btn_'
                                                                                                           onclick='add_sub_cats(this);'
                                                                                                           class='fa fa-plus-circle fa-lg'></a>&nbsp;

                                                                                                        {% if active_advert == 'No'%}
                                                                                                            <a name='level_2' style="color:red;"
                                                                                                               onclick='remove_sub_cats(this,{{category2.category_id}},this.name)'
                                                                                                               class='fa fa-times-circle fa-lg'></a>
                                                                                                        {% endif %}

                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class='row' style='margin-left: 4.33333%;'
                                                                                                     id='sub_cat_level{{forloop.counter}}'>
                                                                                                    {% if sub_category3_list %}
                                                                                                        {% for category3 in sub_category3_list %}
                                                                                                            {% if category3.parent_category_id == category2.category_id %}
                                                                                                                <div class='col-lg-12'>
                                                                                                                    <div class='col-lg-1'
                                                                                                                         style='margin-top: 7px; margin-left:15px; width: 15px; padding:0px;'>
                                                                                                                        {% if category3.has_subcategory == 'Yes'%}
                                                                                                                            <a name='sub_cat_level{{forloop.counter}}'
                                                                                                                               id='collapse_btn_'
                                                                                                                               onclick='collapse_sub_cats(this.name,this.id,this)'
                                                                                                                               class='fa fa-caret-down fa-lg'></a>
                                                                                                                        {% else %}
                                                                                                                            <a name='sub_cat_level{{forloop.counter}}'
                                                                                                                               id='collapse_btn_'
                                                                                                                               onclick='collapse_sub_cats(this.name,this.id,this)'
                                                                                                                               class='fa fa-caret-right fa-lg'></a>
                                                                                                                        {% endif %}
                                                                                                                    </div>
                                                                                                                    <div class='col-lg-10'>
                                                                                                                        <div class='form-group'>
                                                                                                                            <input
                                                                                                                                type='text' name='level_3'
                                                                                                                                id='{{category3.category_id}}'
                                                                                                                                class='form-control'
                                                                                                                                placeholder='Level 3'
                                                                                                                                value="{{category3.category_name}}"
                                                                                                                            />
                                                                                                                            <label
                                                                                                                                for='{{category3.category_id}}' class='error'
                                                                                                                                style='color:red; display:none;'>
                                                                                                                            </label>
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                    <div class='col-lg-1'
                                                                                                                         style='margin-top: 7px; margin-left:15px; padding:0px;'>
                                                                                                                        <a name='sub_cat_level-collapse_btn_'
                                                                                                                           onclick='add_sub_cats(this);'
                                                                                                                           class='fa fa-plus-circle fa-lg'></a>&nbsp;

                                                                                                                        {% if active_advert == 'No'%}
                                                                                                                            <a name='level_3' style="color:red;"
                                                                                                                               onclick='remove_sub_cats(this,{{category3.category_id}},this.name)'
                                                                                                                               class='fa fa-times-circle fa-lg'></a>
                                                                                                                        {% endif %}

                                                                                                                    </div>
                                                                                                                </div>

                                                                                                                <div class='row' style='margin-left: 4.33333%;'
                                                                                                                     id='sub_cat_level4'>
                                                                                                                    {% if sub_category4_list %}
                                                                                                                        {% for category4 in sub_category4_list %}
                                                                                                                            {% if category4.parent_category_id == category3.category_id %}
                                                                                                                                <div class='col-lg-12'>
                                                                                                                                    <div class='col-lg-1'
                                                                                                                                         style='margin-top: 7px; margin-left:15px; width: 15px; padding:0px;'>
                                                                                                                                        {% if category4.has_subcategory == 'Yes'%}
                                                                                                                                            <a name='sub_cat_level{{forloop.counter}}'
                                                                                                                                               id='collapse_btn_'
                                                                                                                                               onclick='collapse_sub_cats(this.name,this.id,this)'
                                                                                                                                               class='fa fa-caret-down fa-lg'></a>
                                                                                                                                        {% else %}
                                                                                                                                            <a name='sub_cat_level{{forloop.counter}}'
                                                                                                                                               id='collapse_btn_'
                                                                                                                                               onclick='collapse_sub_cats(this.name,this.id,this)'
                                                                                                                                               class='fa fa-caret-right fa-lg'></a>
                                                                                                                                        {% endif %}
                                                                                                                                    </div>
                                                                                                                                    <div class='col-lg-10'>
                                                                                                                                        <div class='form-group'>
                                                                                                                                            <input
                                                                                                                                                type='text' name='level_4'
                                                                                                                                                id='{{category4.category_id}}'
                                                                                                                                                class='form-control'
                                                                                                                                                placeholder='Level 4'
                                                                                                                                                value="{{category4.category_name}}"
                                                                                                                                            />
                                                                                                                                            <label
                                                                                                                                                for='{{category4.category_id}}' class='error'
                                                                                                                                                style='color:red; display:none;'>
                                                                                                                                            </label>
                                                                                                                                        </div>
                                                                                                                                    </div>
                                                                                                                                    <div class='col-lg-1'
                                                                                                                                         style='margin-top: 7px; margin-left:15px; padding:0px;'>
                                                                                                                                        <a name='sub_cat_level-collapse_btn_'
                                                                                                                                           onclick='add_sub_cats(this);'
                                                                                                                                           class='fa fa-plus-circle fa-lg'></a>&nbsp;

                                                                                                                                        {% if active_advert == 'No'%}
                                                                                                                                            <a name='level_4' style="color:red;"
                                                                                                                                               onclick='remove_sub_cats(this,{{category4.category_id}},this.name)'
                                                                                                                                               class='fa fa-times-circle fa-lg'></a>
                                                                                                                                        {% endif %}

                                                                                                                                    </div>
                                                                                                                                </div>
                                                                                                                                <div class='row' style='margin-left: 4.33333%;'
                                                                                                                                     id='sub_cat_level{{forloop.counter}}'>
                                                                                                                                    {% if sub_category5_list %}
                                                                                                                                        {% for category5 in sub_category5_list %}
                                                                                                                                            {% if category5.parent_category_id == category4.category_id %}
                                                                                                                                                <div class='col-lg-12'>
                                                                                                                                                    <div class='col-lg-1'
                                                                                                                                                         style='margin-top: 7px; margin-left:15px; width: 15px; padding:0px;'>
                                                                                                                                                    </div>
                                                                                                                                                    <div class='col-lg-10'>
                                                                                                                                                        <div class='form-group'>
                                                                                                                                                            <input
                                                                                                                                                                type='text' name='level_5'
                                                                                                                                                                id='{{category5.category_id}}'
                                                                                                                                                                class='form-control'
                                                                                                                                                                placeholder='Level 5'
                                                                                                                                                                value="{{category5.category_name}}"
                                                                                                                                                            />
                                                                                                                                                            <label
                                                                                                                                                                for='{{category5.category_id}}' class='error'
                                                                                                                                                                style='color:red; display:none;'>
                                                                                                                                                            </label>
                                                                                                                                                        </div>
                                                                                                                                                    </div>
                                                                                                                                                    <div class='col-lg-1'
                                                                                                                                                         style='margin-top: 7px; margin-left:15px; padding:0px;'>

                                                                                                                                                        {% if active_advert == 'No'%}
                                                                                                                                                            <a name='level_5' style="color:red;"
                                                                                                                                                               onclick='remove_sub_cats(this,{{category5.category_id}},this.name)'
                                                                                                                                                               class='fa fa-times-circle fa-lg'></a>
                                                                                                                                                        {% endif %}

                                                                                                                                                    </div>
                                                                                                                                                </div>
                                                                                                                                            {% endif %}
                                                                                                                                        {% endfor %}
                                                                                                                                    {% endif %}
                                                                                                                                </div>
                                                                                                                            {% endif %}
                                                                                                                        {% endfor %}
                                                                                                                    {% endif %}
                                                                                                                </div>
                                                                                                            {% endif %}
                                                                                                        {% endfor %}
                                                                                                    {% endif %}
                                                                                                </div>
                                                                                            {% endif %}
                                                                                        {% endfor %}
                                                                                    {% endif %}
                                                                                </div>
                                                                            {% endfor %}
                                                                        {% endif %}
                                                                    </div>
                                                                </div>

                                                                <div class="col-md-4" style="padding-left: 5.7%; border-left: 1px solid #ddd ">
                                                                    <div class="row">
                                                                        <div class="form-group">
                                                                            <label class="control-label ">Category Image
                                                                                <span class="required"> * </span>
                                                                            </label>
                                                                        </div>
                                                                        <div class="fileinput fileinput-new"
                                                                             data-provides="fileinput">
                                                                            <div class="user-image">
                                                                                <div class="fileinput-new thumbnail"
                                                                                     style="width: 272px; height: 178px;">
                                                                                    <img id="user_img"
                                                                                         src="{{cat_img}}"
                                                                                         alt="">
                                                                                </div>
                                                                                <div class="fileinput-preview fileinput-exists thumbnail"
                                                                                     style="width: 272px; height: 178px;">

                                                                                </div>
                                                                                <div class="user-image-buttons">
                                                                                            <span class="btn btn-azure btn-file btn-sm"><span
                                                                                                    class="fileinput-new"><i
                                                                                                    class="fa fa-pencil"></i></span><span
                                                                                                    class="fileinput-exists"><i
                                                                                                    class="fa fa-pencil"></i></span>
                                                                                                <input type="file">
                                                                                            </span>
                                                                                    <a href="#"
                                                                                       class="btn fileinput-exists btn-red btn-sm"
                                                                                       data-dismiss="fileinput">
                                                                                        <i class="fa fa-times"></i>
                                                                                    </a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="form-group">
                                                                            <label class="control-label ">Category Color
                                                                                <span class="required"> * </span>
                                                                            </label>
                                                                            <div class="form-group">
                                                                                <input type='color' name="cat_name" value="{{cat_color}}"
                                                                                       id="colorpicker" style="width: 272px;"
                                                                                       class="form-control"/>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                    <div class="form-actions text-right">

                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <a href="/category/"> <input type="button"
                                                                                             class="btn default"
                                                                                             data-dismiss="modal"
                                                                                             value="Cancel"></input></a>
                                                                <input id="add_category" value="Save" type="button"
                                                                       class="btn green">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    </form>
                                                </div>
                                            </div>


                                        </div><!-- End Of tab content -->
                                    </div>
                                </div>
                            </div><!-- End of second tab -->
                        </div>
                        <!--</form>  -->
                    </div>
                </div>
                <!-- END FORM-->
            </div>
        </div>
        <!-- END PORTLET-->

    </div>
</div>
</div>
<!-- END CONTENT BODY -->
</div>
<!-- END CONTENT -->
</div>
</div>
<!-- END CONTAINER -->
<!-- /.modal -->


<!-- /.modal -->
<!-- BEGIN FOOTER -->
<div class="page-footer">
    <div class="page-footer-inner"> 2016 &copy; DigiSpace.
    </div>
    <div class="scroll-to-top">
        <i class="icon-arrow-up"></i>
    </div>
</div>


<div style="overflow-y:hidden;" id="affiliate-modal" class="modal fade" role="dialog">
    <div class="modal-dialog" style="width:400px;">

        <!-- Modal content-->
        <div class="modal-content">

            <div class="modal-header">
                <img style="width: 100px; height: 29px; margin-top: -11px; margin-left: 139px;"
                     src="/static/assets/layouts/layout2/img/City_Hoopla_Logo.png" alt="logo" class="logo-default">
                <!--                       <a href="/category/">  <button type="button" class="close" data-dismiss="modal">&times;</button></a> -->
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12">
                        <h4 style="text-align:center"> Category updated successfully</h4>
                    </div>
                </div>

            </div>

            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-offset-5 col-md-2">
                        <a href="/category/"> <input type="submit" value="OK"
                                                     class="btn btn-primary" id="btn-loading-demo"></a>
                    </div>
                </div>
            </div>

        </div>

    </div>
</div>

<div style="overflow-y:hidden;" id="remove-modal" class="modal fade" role="dialog">
    <div class="modal-dialog" style="width:400px;">

        <!-- Modal content-->
        <div class="modal-content">

            <div class="modal-header">
                <img style="width: 100px; height: 29px; margin-top: -11px; margin-left: 139px;"
                     src="/static/assets/layouts/layout2/img/City_Hoopla_Logo.png" alt="logo" class="logo-default">
                <!--                       <a href="/category/">  <button type="button" class="close" data-dismiss="modal">&times;</button></a> -->
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12">
                        <input type="text" id="level_name" hidden>
                        <input type="text" id="sub_cat_id" hidden>
                        <h4 style="text-align:center"> Are you sure you want to delete this Sub-Category along with associated Sub-Categories?</h4>
                    </div>
                </div>

            </div>

            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-offset-4 col-md-2">
                        <input onclick="remove_cat();" type="submit" value="Yes"
                               class="btn btn-primary" id="btn-loading-demo">
                    </div>
                    <div class="col-md-2">
                        <input data-dismiss="modal" type="submit" value="No"
                               class="btn btn-danger" id="btn-loading-demo">
                    </div>
                </div>
            </div>

        </div>

    </div>
</div>

<div style="overflow-y:hidden;" id="error-modal" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <img style="width: 100px; height: 29px; margin-top: -11px; margin-left: 236px;"
                     src="/static/assets/layouts/layout2/img/City_Hoopla_Logo.png" alt="logo" class="logo-default">
                <!--                                <button type="button" class="close" data-dismiss="modal">&times;</button> -->
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12">
                        <h4 class="text-center" id="error-message"></h4>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-offset-5 col-md-2">
                        <input data-dismiss="modal" type="submit" value="OK"
                               class="btn btn-primary" id="btn-loading-demo">
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<div style="overflow-y:hidden;" id="city-modal" class="modal fade" role="dialog">
    <div class="modal-dialog" style="width: 416px;">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <img style="width: 100px; height: 29px; margin-top: -11px; margin-left: 146px;"
                     src="/static/assets/layouts/layout2/img/City_Hoopla_Logo.png" alt="logo" class="logo-default">
                <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="form-group">
                            <label class="control-label ">City
                            </label>
                            <select name="employer" id="city_list" onchange="getCatSequence()"
                                    class="city city_category form-control">
                                <option value="">Select City</option>
                                {% for city in city_list %}
                                <option value="{{city.city_place_id}}">
                                    {{city.city_id.city_name}}
                                </option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="col-lg-12">
                        <table class="table table-striped table-bordered table-hover table-checkable order-column"
                               style="width: 100%;">
                            <thead>
                            <th style="text-align:center">Sr. No.</th>
                            <th style="text-align:center">Category</th>
                            <th style="text-align:center">Sequence</th>
                            </thead>
                            <tbody id="table_body">
                            <tr>
                                <td style="text-align:center">N/A</td>
                                <td style="text-align:center">N/A</td>
                                <td style="text-align:center">N/A</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-offset-5 col-md-2">
                        <input data-dismiss="modal" type="submit" value="OK"
                               class="btn btn-primary" id="btn-loading-demo">
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>


<!-- END FOOTER -->
<!--[if lt IE 9]>
<script src="{% static 'assets/global/plugins/respond.min.js"></script>
<script src="{% static 'assets/global/plugins/excanvas.min.js"></script>
<![endif]-->
<!-- BEGIN CORE PLUGINS -->
<script src="{% static 'assets/global/plugins/jquery.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/bootstrap/js/bootstrap.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/js.cookie.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js' %}"
        type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js' %}"
        type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/jquery.blockui.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/uniform/jquery.uniform.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js' %}"
        type="text/javascript"></script>
<!-- END CORE PLUGINS -->
<!-- BEGIN PAGE LEVEL PLUGINS -->
<script src="{% static 'assets/global/plugins/bootstrap-select/js/bootstrap-select.min.js' %}"
        type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/jquery-multi-select/js/jquery.multi-select.js' %}"
        type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/select2/js/select2.full.min.js' %}" type="text/javascript"></script>
<!-- END PAGE LEVEL PLUGINS -->
<!-- BEGIN PAGE LEVEL PLUGINS -->
<script src="{% static 'assets/global/plugins/select2/js/select2.full.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/pages/scripts/components-select2.min.js' %}" type="text/javascript"></script>
<!-- END PAGE LEVEL PLUGINS -->
<!-- BEGIN THEME GLOBAL SCRIPTS -->
<script src="{% static 'assets/global/scripts/app.min.js' %}" type="text/javascript"></script>
<!-- END THEME GLOBAL SCRIPTS -->
<!-- BEGIN PAGE LEVEL SCRIPTS -->
<script src="{% static 'assets/pages/scripts/components-multi-select.min.js' %}" type="text/javascript"></script>
<!-- END PAGE LEVEL SCRIPTS -->
<!-- BEGIN PAGE LEVEL PLUGINS -->
<script src="{% static 'assets/global/scripts/datatable.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/datatables/datatables.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js' %}"
        type="text/javascript"></script>
<!-- END PAGE LEVEL PLUGINS -->
<!-- BEGIN PAGE LEVEL SCRIPTS -->
<script src="{% static 'assets/pages/scripts/table-datatables-managed.min.js' %}" type="text/javascript"></script>
<!-- END PAGE LEVEL SCRIPTS -->
<!-- BEGIN THEME LAYOUT SCRIPTS -->
<script src="{% static 'assets/layouts/layout2/scripts/layout.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/layouts/layout2/scripts/demo.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/layouts/global/scripts/quick-sidebar.min.js' %}" type="text/javascript"></script>
<!-- END THEME LAYOUT SCRIPTS -->
<!-- END THEME LAYOUT SCRIPTS -->

<script src="{%static 'assets/pages/scripts/dropzone1.js' %}" type="text/javascript"></script>
<script src="{% static 'vendor/bootstrap-fileinput/jasny-bootstrap.js' %}"></script>
<script src="{% static 'spectrum/spectrum.js' %}"></script>
<script>

    $(document).ready(function(){
        $(".city").select2();
        $("#city").select2();
    });

    function validateIntKeyPress(el, evt) {
        var charCode = (evt.which) ? evt.which : event.keyCode;
        if (charCode > 31 && (charCode < 48 || charCode > 57)) {
            return false;
        }
        return true;
    }

    function add_sub_cat(this_val){

        category = $("#cat_name").val();
        var namePattern = /[a-zA-Z0-9\-\s]+$/;

        if (category=="")
        {
            $("#cat_error").css("display", "block");
            $("#cat_error").html("Please enter category");
            return false;
        }
        else{
            $("#cat_error").css("display", "none");
            $("#cat_error").html("");
        }
        parent_level_name = $(this_val).parent().prev('div').find('.form-group').find('input').attr('name');
        catgory_name = $(this_val).parent().prev('div').find('.form-group').find('input').val();
        if($(this_val).parent().prev('div').find('.form-group').find('input').val()=='')
        {
            $(this_val).parent().prev('div').find('.form-group').find('label').css("display", "block");
            $(this_val).parent().prev('div').find('.form-group').find('label').html("Please enter sub category");
            return false;
        }
        else{
            $(this_val).parent().prev('div').find('.form-group').find('label').css("display", "none");
            $(this_val).parent().prev('div').find('.form-group').find('label').html("");
        }


        if(namePattern.test(category))
        {
            if($.isNumeric($("#cat_name").val()))
            {
                $("#cat_error").css("display", "block");
                $("#cat_error").html("Category should contain alphanumeric only");
                return false;
            }
        }
        else{
            $("#cat_error").css("display", "none");
            $("#cat_error").html("");
        }

        if(namePattern.test(catgory_name))
        {
            if($.isNumeric(catgory_name))
            {

                $(this_val).parent().prev('div').find('.form-group').find('label').css("display", "block");
                $(this_val).parent().prev('div').find('.form-group').find('label').html("Sub category should contain alphanumeric only");
                return false;
            }
        }
        else{
            $(this_val).parent().prev('div').find('.form-group').find('label').css("display", "none");
            $(this_val).parent().prev('div').find('.form-group').find('label').html("");
        }

        //var div_name = div_name.split('-');
        $(this_val).parent().prev('div').prev('div').find('a').removeClass("fa fa-caret-right fa-lg").addClass("fa fa-caret-down fa-lg");

        if(parent_level_name == 'cat_name'){
            level_name = 'level_1'
            levels = 1
        }
        if(parent_level_name == 'level_1'){
            level_name = 'level_2'
            levels = 2
        }
        else if(parent_level_name == 'level_2'){
            level_name = 'level_3'
            levels = 3
        }
        else if(parent_level_name == 'level_3'){
            level_name = 'level_4'
            levels = 4
        }
        else if(parent_level_name == 'level_4'){
            level_name = 'level_5'
            levels = 5
        }
        if(parent_level_name != 'level_4'){
            collapse_btn = "<div class='col-lg-1' style='margin-top: 7px; margin-left:15px; width: 15px; padding:0px;'><a name='sub_cat_level' id='collapse_btn_' onclick='collapse_sub_cats(this)' class='fa fa-caret-right fa-lg'></a></div>"
            btn = "<div class='col-lg-1' style='margin-top: 7px; margin-left:15px; padding:0px;'><a name='sub_cat_level-collapse_btn_' onclick='add_sub_cats(this);' class='fa fa-plus-circle fa-lg'></a>&nbsp;&nbsp;<a name='sub_cat_level-collapse_btn_' style='color:red' onclick='remove_sub_cat_new(this);' class='fa fa-times-circle fa-lg'></a></div>"
            child_div = "<div class='row' style='margin-left: 4.33333%;' id='sub_cat_level'></div>"
        }
        else{
            collapse_btn = "<div class='col-lg-1' style='margin-top: 7px; margin-left:15px; width: 15px; padding:0px;'></div>"
            btn = "";
            child_div = "";
        }

        $(this_val).parent().next('.row').append(
            "<div class='col-lg-12'>"+collapse_btn+"<div class='col-lg-10'><div class='form-group' >"+
            "<input type='text' name='"+level_name+"' id='' class='form-control' placeholder='Level "+ levels +"'/><label for='sub_cat_name' class='error' style='color:red; display:none;'></div></div>"+
            btn + "</div>"+ child_div

        );

        $(this_val).parent().next('.row').show();
    }

    function add_sub_cats(this_val){

        category = $("#cat_name").val();
        var namePattern = /[a-zA-Z0-9\-\s]+$/;

        if (category=="")
        {
            $("#cat_error").css("display", "block");
            $("#cat_error").html("Please enter category");
            return false;
        }
        else{
            $("#cat_error").css("display", "none");
            $("#cat_error").html("");
        }
        parent_level_name = $(this_val).parent().prev('div').find('.form-group').find('input').attr('name');
        catgory_name = $(this_val).parent().prev('div').find('.form-group').find('input').val();
        if($(this_val).parent().prev('div').find('.form-group').find('input').val()=='')
        {
            $(this_val).parent().prev('div').find('.form-group').find('label').css("display", "block");
            $(this_val).parent().prev('div').find('.form-group').find('label').html("Please enter sub category");
            return false;
        }
        else{
            $(this_val).parent().prev('div').find('.form-group').find('label').css("display", "none");
            $(this_val).parent().prev('div').find('.form-group').find('label').html("");
        }


        if(namePattern.test(category))
        {
            if($.isNumeric($("#cat_name").val()))
            {
                $("#cat_error").css("display", "block");
                $("#cat_error").html("Category should contain alphanumeric only");
                return false;
            }
        }
        else{
            $("#cat_error").css("display", "none");
            $("#cat_error").html("");
        }

        if(namePattern.test(catgory_name))
        {
            if($.isNumeric(catgory_name))
            {

                $(this_val).parent().prev('div').find('.form-group').find('label').css("display", "block");
                $(this_val).parent().prev('div').find('.form-group').find('label').html("Sub category should contain alphanumeric only");
                return false;
            }
        }
        else{
            $(this_val).parent().prev('div').find('.form-group').find('label').css("display", "none");
            $(this_val).parent().prev('div').find('.form-group').find('label').html("");
        }

        //var div_name = div_name.split('-');
        $(this_val).parent().prev('div').prev('div').find('a').removeClass("fa fa-caret-right fa-lg").addClass("fa fa-caret-down fa-lg");

        if(parent_level_name == 'cat_name'){
            level_name = 'level_1'
            levels = 1
        }
        if(parent_level_name == 'level_1'){
            level_name = 'level_2'
            levels = 2
        }
        else if(parent_level_name == 'level_2'){
            level_name = 'level_3'
            levels = 3
        }
        else if(parent_level_name == 'level_3'){
            level_name = 'level_4'
            levels = 4
        }
        else if(parent_level_name == 'level_4'){
            level_name = 'level_5'
            levels = 5
        }
        if(parent_level_name != 'level_4'){
            collapse_btn = "<div class='col-lg-1' style='margin-top: 7px; margin-left:15px; width: 15px; padding:0px;'><a name='sub_cat_level' id='collapse_btn_' onclick='collapse_sub_cats(this)' class='fa fa-caret-right fa-lg'></a></div>"
            btn = "<div class='col-lg-1' style='margin-top: 7px; margin-left:15px; padding:0px;'><a name='sub_cat_level-collapse_btn_' onclick='add_sub_cats(this);' class='fa fa-plus-circle fa-lg'></a>&nbsp;&nbsp;<a name='sub_cat_level-collapse_btn_' style='color:red' onclick='remove_sub_cat_new(this);' class='fa fa-times-circle fa-lg'></a></div>"
            child_div = "<div class='row' style='margin-left: 4.33333%;' id='sub_cat_level'></div>"
        }
        else{
            collapse_btn = "<div class='col-lg-1' style='margin-top: 7px; margin-left:15px; width: 15px; padding:0px;'></div>"
            btn = "";
            child_div = "";
        }

        $(this_val).parent().parent().next('.row').append(
            "<div class='col-lg-12'>"+collapse_btn+"<div class='col-lg-10'><div class='form-group' >"+
            "<input type='text' name='"+level_name+"' id='' class='form-control' placeholder='Level "+ levels +"'/><label for='sub_cat_name' class='error' style='color:red; display:none;'></div></div>"+
            btn + "</div>"+ child_div

        );

        $(this_val).parent().parent().next('.row').show();
    }

    function collapse_sub_cat(div_name,id,xyz){

        if ($("#"+div_name).is(':hidden')){
            $("#"+div_name).show();
            $(xyz).removeClass("fa fa-caret-right fa-lg");
            $(xyz).addClass("fa fa-caret-down fa-lg");
        }
        else{
            $("#"+div_name).hide();
            $(xyz).removeClass("fa fa-caret-down fa-lg");
            $(xyz).addClass("fa fa-caret-right fa-lg");

        }

    }

    function collapse_sub_cats(div_name,id,xyz){
        if ($(xyz).parent().parent().next('.row').is(':hidden')){
            $(xyz).parent().parent().next('.row').removeClass('hidden');
            $(xyz).removeClass("fa fa-caret-right fa-lg");
            $(xyz).addClass("fa fa-caret-down fa-lg");
        }
        else{
            $(xyz).parent().parent().next('.row').addClass('hidden');
            $(xyz).removeClass("fa fa-caret-down fa-lg");
            $(xyz).addClass("fa fa-caret-right fa-lg");

        }

    }

    var sub_cat_level = '';
    var sub_cat_id = '';

    function remove_sub_cats(xyz,cat_id,level_name){

        sub_cat_id = cat_id;
        sub_cat_level = level_name;
        $("#level_name").val(level_name);
        $("#sub_cat_id").val(cat_id);
        $("#remove-modal").modal('show');
        //$(xyz).parent().parent().next('div').html('');
        //$(xyz).parent().prev('div').prev('div').find('a').removeClass("fa fa-caret-down fa-lg").addClass("fa fa-caret-right fa-lg");
    }

    function remove_sub_cat_new(xyz){
        $(xyz).parent().parent().next('div').html('');
        //$(xyz).parent().prev('div').prev('div').find('a').removeClass("fa fa-caret-down fa-lg").addClass("fa fa-caret-right fa-lg");
        $(xyz).parent().parent().html('');

    }

    function remove_sub_cat(xyz,cat_id,level_name,has_subcategory){
        if(has_subcategory == '0'){
            return false;
        }
        sub_cat_id = cat_id;
        sub_cat_level = level_name;
        $("#level_name").val(level_name);
        $("#sub_cat_id").val(cat_id);
        $("#remove-modal").modal('show');
        //$(xyz).parent().next('div').html('');
        //$(xyz).parent().prev('div').prev('div').find('a').removeClass("fa fa-caret-down fa-lg").addClass("fa fa-caret-right fa-lg");
    }

    function remove_cat(){
        $.ajax({
            type: "POST",
            url : '/delete-sub-category/',
            data : {'sub_cat_id':sub_cat_id,'sub_cat_level':sub_cat_level},
            success: function (response) {
                location.reload();
            },
            error: function (response) {
                alert("Error!");
            },

        });
    }

    $("#view_sequence").click(function(){
        $("#city-modal").modal('show');
    });

    $('#city-modal').on('hidden.bs.modal', function () {
        $("#table_body").html('');
        $("#city_list").val('').change();
        data = "<tr><td>N/A</td><td style='text-align:center'>N/A</td><td  style='text-align:center'>N/A</td></tr>"
        $("#table_body").append(data);
    })

    function getCatSequence() {
        city_id = $("#city_list").val();
        if(city_id == ''){
            $("#table_body").html('');
            data = "<tr><td>N/A</td><td style='text-align:center'>N/A</td><td  style='text-align:center'>N/A</td></tr>"
            $("#table_body").append(data);
            return false;
        }
        $.ajax({
            type: "POST",
            url : '/get-cat-sequence/',
            data : {'city_id':city_id},
            success: function (response) {
                $("#table_body").html('');
                $.each(response.sequence_list, function (index, item) {
                    data = "<tr><td>"+ item.no +"</td><td style='text-align:center'>"+ item.category_name +"</td><td  style='text-align:center'>"+ item.sequence +"</td></tr>"
                    $("#table_body").append(data);
                });
            },
            error: function (response) {
                alert("Error!");
            },

        });
    }

    function checkCategory()
    {
        category = $("#cat_name").val();
        var namePattern = /[a-zA-Z0-9\-\s]+$/;

        if(namePattern.test(category))
        {
            if($.isNumeric($("#cat_name").val()))
            {
                $("#cat_error").css("display", "block");
                $("#cat_error").html("Category should contain alphanumeric only");
                return false;
            }

            else{

            $("#cat_error").css("display", "none");
            return true;
            }
        }
        else if (category=="")
        {
            $("#cat_error").css("display", "block");
           $("#cat_error").html("Please enter category");
           return false;
        }
        else{
                $("#cat_error").css("display", "block");
            $("#cat_error").html("Category should contain alphanumeric only");
            return false;

        }
    }

    var appendCity = "<div class='row'><div class='col-lg-5'><label class='control-label' >City</label><select  name='city' class='city_category city_category1  form-control' ><option value=''>Select City</option></select><label class='error' style='color:red; display:none;'></div><div class='col-lg-4'><div class='form-group'><label class='control-label '>Sequence</label><input type='text' name='sequence' onkeypress='return validateIntKeyPress(this,event);' id='sequence' class='sequence_category form-control'/><label class='error' id='' style='color:red; display:none;'></label></div></div></div>";

    $(".add-city").click(function(){
        $(appendCity).appendTo('#city-sequence');
        $(".city_category1").select2();
        getCity();
    });

    function getCity() {

        $.ajax({
            type: 'GET',
            url: '/get_city/',
            success: function (response) {
                var divs = $(".city_category1");
                var lastchild = divs[divs.length - 1];
                $(lastchild).val("");
                $.each(response.city_list, function (index, item) {
                    $(lastchild).append(item);
                });
            },
            error: function (response) {
                alert("Error!");
            },

        });
    }

    $("#add_category").click(function(event)  {
        event.preventDefault();

        if (checkCategory() == false){
            return false;
        };

        if (validateData() == false){
            return false;
        };

        if (checkDuplicates() == false){
            return false;
        };

        var panel= $("#sub_cat_level_1");
        var inputs = panel.find("input");

        var level_1 = '';
        var level_2 = [];
        var level_3 = [];
        var level_4 = [];
        var level_5 = [];
        list = []
        for (i = 0; i < inputs.length; i++) {
            j = i + 1;
            if (j <= inputs.length){
                if (j== inputs.length){
                    j = j - 1;
                }
                if(inputs[i].value == ''){
                    $(inputs[i]).parent().children('.error').css("display", "block");
                    $(inputs[i]).parent().children('.error').html("Please enter sub category");;
                    return false;
                }
                if($.isNumeric(inputs[i].value)){
                    $(inputs[i]).parent().children('.error').css("display", "block");
                    $(inputs[i]).parent().children('.error').html("Sub category should contain alphanumeric only");;
                    return false;
                }
                if(inputs[i].name == 'level_1'){
                    if(level_1 !=[] && inputs[j].name != 'level_2' || level_1 ==[] && inputs[j].name != 'level_2'){
                        level_1 = [];
                        level_id_1 = [];
                        level_1 = inputs[i].value;
                        level_id_1 = inputs[i].id;
                        dict = {
                                    'level_1':level_1, 'level_id_1':level_id_1,
                                    'level_2': [], 'level_id_2':[],
                                    'level_3':[], 'level_id_3':[],
                                    'level_4':[], 'level_id_4':[],
                                    'level_5':[], 'level_id_5':[]
                               };
                        list.push(dict);
                    }
                    else{
                        level_1 = []
                        level_id_1 = []
                        level_1 = inputs[i].value
                        level_id_1 = inputs[i].id
                        level_2 = []
                        level_id_2 = []
                        level_3 = []
                        level_id_3 = []
                        level_4 = []
                        level_id_4 = []
                        level_5 = []
                        level_id_5 = []
                    }
                }
                else if(inputs[i].name == 'level_2'){
                    if(level_2 !=[] && inputs[j].name != 'level_3' || level_2 ==[] && inputs[j].name != 'level_3'){
                        level_2 = []
                        level_id_2 = []
                        level_2.push(inputs[i].value)
                        level_id_2.push(inputs[i].id)
                        dict = {
                                    'level_1':level_1, 'level_id_1':level_id_1,
                                    'level_2': level_2, 'level_id_2':level_id_2,
                                    'level_3':[], 'level_id_3':[],
                                    'level_4':[], 'level_id_4':[],
                                    'level_5':[], 'level_id_5':[]
                               };
                        list.push(dict);
                    }
                    else{
                        level_2 = []
                        level_id_2 = []
                        level_2.push(inputs[i].value)
                        level_id_2.push(inputs[i].id)
                        level_3 = []
                        level_id_3 = []
                        level_4 = []
                        level_id_4 = []
                        level_5 = []
                        level_id_5 = []
                    }
                }
                else if(inputs[i].name == 'level_3'){
                    if(level_3 !=[] && inputs[j].name != 'level_4' || level_3 ==[] && inputs[j].name != 'level_4'){
                        level_3 = []
                        level_id_3 = []
                        level_3.push(inputs[i].value)
                        level_id_3.push(inputs[i].id)
                        dict = {
                                    'level_1': level_1, 'level_id_1':level_id_1,
                                    'level_2': level_2, 'level_id_2':level_id_2,
                                    'level_3': level_3, 'level_id_3':level_id_3,
                                    'level_4':[], 'level_id_4':[],
                                    'level_5':[], 'level_id_5':[]
                               };
                        list.push(dict);
                    }
                    else{
                        level_3 = []
                        level_id_3 = []
                        level_3.push(inputs[i].value)
                        level_id_3.push(inputs[i].id)
                        level_4 = []
                        level_id_4 = []
                        level_5 = []
                        level_id_5 = []
                    }
                }
                else if(inputs[i].name == 'level_4'){
                    if(level_4 !=[] && inputs[j].name != 'level_5' || level_4 ==[] && inputs[j].name != 'level_5'){
                        level_4 = []
                        level_id_4 = []
                        level_4.push(inputs[i].value)
                        level_id_4.push(inputs[i].id)
                        dict = {
                                    'level_1': level_1, 'level_id_1':level_id_1,
                                    'level_2': level_2, 'level_id_2':level_id_2,
                                    'level_3': level_3, 'level_id_3':level_id_3,
                                    'level_4': level_4, 'level_id_4':level_id_4,
                                    'level_5':[], 'level_id_5':[]
                               };
                        list.push(dict);
                    }
                    else{
                        level_4 = []
                        level_id_4 = []
                        level_4.push(inputs[i].value)
                        level_id_4.push(inputs[i].id)
                        level_5 = []
                        level_id_5 = []
                    }
                }
                else if(inputs[i].name == 'level_5'){
                    if(level_5 !=[] && inputs[j].name == 'level_5' || level_5 ==[] && inputs[j].name == 'level_5'){
                        level_5.push(inputs[i].value)
                        level_id_5.push(inputs[i].id)
                    }
                    else{
                        level_5.push(inputs[i].value)
                        level_id_5.push(inputs[i].id)
                    }
                    dict = {
                                    'level_1': level_1, 'level_id_1':level_id_1,
                                    'level_2': level_2, 'level_id_2':level_id_2,
                                    'level_3': level_3, 'level_id_3':level_id_3,
                                    'level_4': level_4, 'level_id_4':level_id_4,
                                    'level_5': level_5, 'level_id_5':level_id_5
                               };
                    list.push(dict);
                }
            }
        }

        $('.fileinput-preview').children('img').attr('id', 'new_img');
        var file_data = $('#user_img').attr('src');
        var formData = new FormData();

        if(uploaded_file_name != 'undefined'){
            formData.append('img',uploaded_file_name);
        }
        else{
            formData.append('img','');
        }
        color = $("#colorpicker").val();
        formData.append('list',JSON.stringify(list));
        formData.append('cat_color',color);
        formData.append('cat_name',$("#cat_name").val());
        formData.append('form_data',$("#cityform").serialize());



        $.ajax({
            type : "POST",
            url : '/update-category/',
            data : formData,
            cache: true,
            processData: false,
            contentType: false,

            success: function (response) {
                if(response.success=='true'){
                    $("#affiliate-modal").modal('show');
                }
                if (response.success == "false") {
                    $('#error-message').text(response.message)
                    $("#error-modal").modal('show');
                }
            },
            beforeSend: function () {
                $("#processing").css('display','block');
            },
            complete: function () {
                $("#processing").css('display','none');
            },
            error : function(response){
                alert("_Error");
            }
        });
    });

    function validateData(){
        if(checkSequence(".sequence_category") & checkCity(".city_category")){
            if(checkCity(".city_category") == false){
                return false;
            }
            else{
                if(checkCitys(".city_category") == false){
                    return false;
                }
                return true;
            }
            return true;
        }
        return false;
    }

    function checkSequence(sequence_category){
        var isValid = true;
        $(sequence_category).each(function( index ) {
            var sequence_category = $(this).val();
            var parentvalue = $(this).parent().parent().prev('div').find('select').val() ;
            if( parentvalue != "") {
                if(sequence_category ==''){
                    $(this).parent().children('.error').css("display", "block");
                    $(this).parent().children('.error').text("Please select Sequence ");
                    isValid = false;
                    return false ;
                }
                else{
                    $(this).parent().children('.error').css("display", "none");
                    isValid = true;
                    return true ;
                }
            }
        });
        return isValid;
    }

    function checkCity(city_category){
        var isValid = true;
        $(city_category).each(function( index ) {
            var city_category = $(this).val();
            var parentvalue = $(this).parent().parent().next('div').find('.sequence_category').val() ;
            if(parentvalue == undefined){
                $(this).parent().children('.error').css("display", "none");
                isValid = true;
            }
            else if( parentvalue != "") {
                if(city_category ==''){
                    $(this).parent().children('.error').css("display", "block");
                    $(this).parent().children('.error').text("Please select city ");
                    isValid = false;
                    return false ;
                }else{
                    isValid = true;
                    return true ;
                }
            }else{
                $(this).parent().children('.error').css("display", "none");
                isValid = true;
                return true ;
            }
        });
        return isValid;
    }

    function checkCitys(city_category){
        var isValid = true;
        $(city_category).each(function( index ) {
            var city_category = $(this).val();
            var parentvalue = $(this).parent().next('div').find('.sequence_category').val() ;
            if(parentvalue == undefined){
                $(this).parent().children('.error').css("display", "none");
                isValid = true;
            }
            else if( parentvalue != "") {
                if(city_category ==''){
                    $(this).parent().children('.error').css("display", "block");
                    $(this).parent().children('.error').text("Please select city ");
                    isValid = false;
                    return false ;
                }else{
                    isValid = true;
                    return true ;
                }
            }else{
                $(this).parent().children('.error').css("display", "none");
                isValid = true;
                return true ;
            }
        });
        return isValid;
    }

    function checkDuplicates(){
        var selectedcitylist = [];
        $.each($(".city_category"), function(){
            var cityName = $(this).find(":selected").val();
            if (cityName!=''){
                selectedcitylist.push(cityName);
            }
        })
        var sorted_arr = selectedcitylist.slice().sort();
        var results = [];
        for (var i = 0; i < selectedcitylist.length - 1; i++) {
            if (sorted_arr[i + 1] == sorted_arr[i]) {
                results.push(sorted_arr[i]);
            }
        }
        if(results.length>=1)
        {
            $("#city_error").css("display", "block");
            $("#city_error").html("Please select a different city");
            return false;
        }
        else
        {
            $("#city_error").css("display", "none");
            return true;
        }
    }


</script>


</body>

</html>
